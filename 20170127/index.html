<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>CreateJS</title>
</head>
<body>
	<h1>CreateJS</h1>
	<hr>
	<canvas id="myCanvas" width="3000" height="2000"></canvas>

  	<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
  	<script>
  		window.addEventListener('load',init);


		function init() {
	  		var stage = new createjs.Stage("myCanvas");
	  		stage.enableMouseOver();
	  		

	  		var shape = new createjs.Shape();
	  		shape.graphics.beginFill("#FF0000");
	  		shape.graphics.drawRect(400,100,200,200);
	  		window.addEventListener('click', handleClick);
	  		shape.addEventListener('mouseover', handleMouseOver);


	  		stage.addChild(shape);

	  		shape.rotation = 45;

			var muki = +1;
			var speed = 1;
			var flag = 0;

	  		createjs.Ticker.on('tick',function(){
	  			
	  			shape.x +=5*speed*muki;
	  			
	  			if(shape.x>2600){				
	  			muki = -1;	
	  			}else if (shape.x < 0){
	  				muki = +1;
	  			}
	  			
	  			stage.update();

	  		});
  			
	  		function handleClick(event){
	  			speed *= 2;
	  			if(flag==0){
	  			shape.graphics
	  			.clear()
	  			.beginFill("green")
		  		.drawRect(400,100,200,200);
		  		flag = 1;

		  		}else{
		  			shape.graphics
		  			.clear()
		  			.beginFill("red")
			  		.drawRect(400,100,200,200);
			  		flag = 0;
		  		}
	  		} 
	  		function handleMouseOver(event){
	  			speed = 1;
	  			muki = -1;
	  		}

		}
  	</script>
</body>
</html>